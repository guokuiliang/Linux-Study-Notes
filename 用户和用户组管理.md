# __1.用户配置文件__ 
###  __/etc/passwd 用户信息文件__
passwd的文件默认权限为 644
内容大致如下
__account:password:UID:GID:GECOS:directory:shell__
```shell
 root:*:0:0:SystemAdministrator:/root:/bin/bash
 quinn:*:500:500:quinn:/home/quinn:/bin/bash
```
__第一个字段__：__用户名称__
__第二个字段__：__密码标志__，x代表的标识，具体的密码在shadow文件中
__第三个字段__：__UID__(用户ID)
1.root用户为0
2.系统用户(伪用户)1-499
3.普通用户500以后
__第四个字段__：__GID__(用户组ID)
1.初始组：也可以叫主组，就是指的是用户一登陆就立刻拥有这个用户组的相关权限，__每个用户的初始组只能有一个__，一般在新建这个用户时会建一个与用户名相同的组作为这个用户的初始组，__不建议去改用户的初始组__。
2.附加组：指用户可以加入多个其他的用户组，并拥有这些组的权限，__附加组可以有多个__。
__第五个字段__：备注，对用户的说明
__第六个字段__：家目录(宿主目录) 
root: /root
quinn: /home/quinn
__第七个字段__：登陆之后的shell，Linux的命令解释器，__尽量不要修改shell,如果修改错了则会无法登陆__。
```
常见的shell:
/bin/bash
/bin/csh
/bin/ksh
/bin/sh
/bin/tcsh
/bin/zsh
/sbin/nologin
```
###  __/etc/shadow 影子文件__
shadow的文件的默认权限为 000，只有root用户才可以修改
内容大致如下
```
root:asdf:16066:0:90:7:16076:
```
__第一个字段__：用户名
__第二个字段__：密文密码，
加密算法，以前为MD5加密，后来升级为SHA512散列加密
如果为“*”或者“!!”则说明没有密码。并且不能登陆
__第三个字段__：密码最后一个修改日期，用时间戳表示
使用1970/1/1作为标准时间，每过一天时间加1
__第四个字段__：两次密码修改间隔，按天为单位，0为无间隔
__第五个字段__：密码有效期，意思就是90天后必须更改密码
__第六个字段__：密码快到期的提醒时间 意思就是密码快到期的还剩7天的时候，会有密码更改提醒
__第七个字段__：密码到期后宽限时间，密码到期后还能使用的天数。
“0”  为立即失效
”-1” 为永不失效 
__第八个字段__：账号失效时间，用时间戳表示
__第九个字段__：保留
###  __/etc/group  组信息文件__
内容大致如下
```
root:x:0:
quinn:x:35:
```
__第一个字段__：组名
__第二个字段__：组的密码标志
__第三个字段__：GID(组ID)
1.root组为0
2.系统组1-499
3.普通组500以后
__第四个字段__：组中的附加用户
__这里无法看到用户的初始组，只能通过去passwd文件中找到GID，然后在这里找到对应的组名__
###  __/etc/gshadow 组密码文件__
内容大致如下
```
root:::
quinn:!::
```
__第一个字段__：组名
__第二个字段__：组密码  __不推荐使用组密码__
__第三个字段__：组管理员用户名
__第四个字段__：组中的附加用户
- - -
# __2.用户管理的相关文件__
普通用户：/home/用户名 权限默认为700
root用户：/root   权限默认为550
__如果想把一个普通用户变成超级用户，则可以将该用户的UID改为0__
/var/spool/mail/用户名：每个用户的系统邮箱
/etc/skel：用户模版目录（新建用户时初始的模版文件）

# __3.用户管理命令__
```shell
useradd [选项]  用户名
-u  UID:           #指定用户的UID号
-d  home目录:       #指定用户的home目录
-c  用户说明:        #为用户添加说明
-g  初始组名:        #为用户添加初始组
-G  附加组名:        #为用户添加附加组
-s  shell类型:      #为用户指定shell,默认bin/bash
```
```shell
/etc/default/useradd:
GROUP=100                 #用户默认组(公有模式)
HOME-/home                #用户家目录
INACTIVE=-1               #密码过期宽限天数(shadow文件第七个字段)
EXPIRE=                   #密码失效时间(shadow文件第八个字段)
SHELL=/bin/bash           #默认shell
SKEL=/etc/skel            #模版目录
CREATE_MAIL_SPOOL=yes     #是否建立邮箱
```
```shell
/etc/login.defs:
PASS_MAX_DAY   99999      #密码有效期(shadow文件第五个字段)
PASS_MIN_DAYS  0          #密码修改间隔(shadow文件第四个字段)
PASS_MIN_LEN   5          #密码最小位数(PAM)
PASS_WARN_AGE  7          #密码到期警告(shadow文件第六个字段)
UID_MIN        500        #最小UID
GID_MAX        60000      #最大UID
ENCRYPT_METHOD SHA512     #加密模式
```
```shell
passwd [选项] 用户名
-S              #查询用户密码的密码状态，仅root可用
-l              #暂时锁定用户，仅root可用
-u              #解锁用户，仅root可用
--stdin         #可以通过管道符输出的数据作为用户的密码
```
```shell
usermod [选项] 用户名
-u  UID:           #修改用户的UID号
-d  home目录:       #修改用户的home目录
-c  用户说明:        #修改用户说明
-g  初始组名:        #修改用户的初始组
-G  附加组名:        #修改用户的附加组
-s  shell类型:      #修改用户shell,默认bin/bash
-L                 #锁定用户
-U                 #解锁用户
```
__'usermod -L'与'passwd -l'的区别在于锁定用户使用‘usermod’会在shadow文件的密码字段开始处加‘！’，而'passwd'则会在shadow文件的密码字段开始处加‘!!’,两者都可以起到锁定用户的作用。其他锁定用户的方法：1.可以直接注释用户那一行，2.将用户的默认shell改为'nologin'__
```shell
chage [选项] 用户名
-l                 #列出用户的详细密码状态
-d 日期：           #修改密码最后一次更改日期(shadow文件第三个字段)
-m 天数：           #两次密码的修改间隔(shadow文件第四个字段)
-M 天数：           #密码有效期(shadow文件第五个字段)
-W 天数：           #密码过期前警告天数(shadow文件第六个字段)
-I 天数：           #密码过期后宽限天数(shadow文件第7个字段)
-E 日期：           #账号失效时间(shadow文件第八个字段)
```
__如果最后一次修改时间为0，当用户登录系统时，系统都会强制用户修改密码，可以配合shell批量生产用户时使用，给定用户初始密码，然后强制让用户改密码__
```shell
userdel [-r] 用户名
-r                 #删除用户的同时删除用户家目录
```
```shell
id 用户名           #查看用户的UID，GID
```
```shell
su [选项] 用户名
-：             #选项只使用‘-’代表连带用户的环境变量一起切换
-c 命令：        #仅执行一次命令，而不切换用户身份
```
```shell
env             #查看当前环境变量
```
# __4.用户组管理命令__
```shell
groupadd [选项] 组名
-g GID        #指定组ID
```
```shell
groupmod [选项] 组名
-g GID：        #修改组ID
-n 新组名：      #修改组名   
```
```shell
groupdel 组名      #如果该组中有初始用户，则无法删除
```
```shell
gpasswd 选项 组名
-a 用户名：         #把用户加入组
-d 用户名：         #把用户从组中删除
```